# Python PEP 8 ä»£ç é£Žæ ¼æŒ‡å—

**PEP 8å®Œå…¨è§£è¯»**

---

## ðŸ“‹ ç›®å½•

- [PEP 8ç®€ä»‹](#PEP-8ç®€ä»‹)
- [ä»£ç å¸ƒå±€](#ä»£ç å¸ƒå±€)
- [å‘½åçº¦å®š](#å‘½åçº¦å®š)
- [è¡¨è¾¾å¼å’Œè¯­å¥](#è¡¨è¾¾å¼å’Œè¯­å¥)
- [è‡ªåŠ¨åŒ–å·¥å…·](#è‡ªåŠ¨åŒ–å·¥å…·)

---

## PEP 8ç®€ä»‹

### ä»€ä¹ˆæ˜¯PEP 8

```python
"""
PEP 8: Style Guide for Python Code
Pythonä»£ç é£Žæ ¼æŒ‡å—
"""

# PEP 8æ˜¯ä»€ä¹ˆ:
# - Pythonå®˜æ–¹ä»£ç é£Žæ ¼æŒ‡å—
# - æé«˜ä»£ç å¯è¯»æ€§
# - ä¿ƒè¿›ä»£ç ä¸€è‡´æ€§
# - ç¤¾åŒºå¹¿æ³›é‡‡ç”¨

# æ ¸å¿ƒåŽŸåˆ™:
# "ä»£ç è¢«é˜…è¯»çš„æ¬¡æ•°è¿œå¤šäºŽè¢«ç¼–å†™çš„æ¬¡æ•°"
# "ä¸€è‡´æ€§å¾ˆé‡è¦"
# "ä½†å®žç”¨æ€§èƒœè¿‡çº¯ç²¹æ€§"

# å·¥å…·æ”¯æŒ:
# - black: è‡ªåŠ¨æ ¼å¼åŒ–
# - ruff: å¿«é€Ÿlinter
# - flake8: é£Žæ ¼æ£€æŸ¥
# - pylint: é™æ€åˆ†æž
```

---

## ä»£ç å¸ƒå±€

### ç¼©è¿›

```python
"""
ç¼©è¿›è§„åˆ™
"""

# âœ… ä½¿ç”¨4ä¸ªç©ºæ ¼ç¼©è¿›
def function():
    x = 1
    if x > 0:
        print(x)

# âŒ ä¸è¦ä½¿ç”¨Tab
def function():
	x = 1  # ä½¿ç”¨Tab (é”™è¯¯)

# âœ… ç»­è¡Œå¯¹é½
# æ–¹æ³•1: ä¸Žå¼€æ‹¬å·å¯¹é½
foo = long_function_name(var_one, var_two,
                         var_three, var_four)

# æ–¹æ³•2: æ‚¬æŒ‚ç¼©è¿›
foo = long_function_name(
    var_one, var_two,
    var_three, var_four)

# âœ… ifè¯­å¥ç»­è¡Œ
if (this_is_one_thing and
        that_is_another_thing):
    do_something()

# âœ… åˆ—è¡¨/å­—å…¸/é›†åˆ
my_list = [
    1, 2, 3,
    4, 5, 6,
]

my_dict = {
    'key1': 'value1',
    'key2': 'value2',
}
```

### è¡Œé•¿åº¦

```python
"""
è¡Œé•¿åº¦é™åˆ¶
"""

# PEP 8: æœ€å¤§79å­—ç¬¦
# çŽ°ä»£å®žè·µ: 88å­—ç¬¦ (blacké»˜è®¤) æˆ– 100å­—ç¬¦

# âœ… çŸ­è¡Œ
def short_function(arg1, arg2):
    return arg1 + arg2

# âœ… é•¿è¡Œæ‹†åˆ†
def long_function_name(
    argument_one,
    argument_two,
    argument_three,
    argument_four
):
    return argument_one + argument_two

# âœ… é•¿å­—ç¬¦ä¸²
long_string = (
    "This is a very long string that would be too long "
    "to fit on a single line, so we split it into "
    "multiple lines."
)

# âœ… é•¿URLæ³¨é‡Š
# See:
# https://very-long-url-that-would-exceed-the-line-limit.example.com/path

# âœ… withè¯­å¥
with open('/path/to/some/file/you/want/to/read') as file_1, \
     open('/path/to/some/file/you/want/to/write') as file_2:
    file_2.write(file_1.read())
```

### ç©ºè¡Œ

```python
"""
ç©ºè¡Œè§„åˆ™
"""

# âœ… é¡¶çº§å‡½æ•°å’Œç±»ä¹‹é—´: 2ä¸ªç©ºè¡Œ


def top_level_function_one():
    pass


def top_level_function_two():
    pass


class MyClass:
    pass


class AnotherClass:
    pass


# âœ… ç±»æ–¹æ³•ä¹‹é—´: 1ä¸ªç©ºè¡Œ
class MyClass:
    def method_one(self):
        pass
    
    def method_two(self):
        pass


# âœ… å‡½æ•°å†…é€»è¾‘åˆ†ç»„: 1ä¸ªç©ºè¡Œ
def function():
    # æ­¥éª¤1
    x = 1
    y = 2
    
    # æ­¥éª¤2
    result = x + y
    
    # æ­¥éª¤3
    return result


# âŒ ä¸è¦è¿‡å¤šç©ºè¡Œ
def bad():
    
    
    x = 1  # å¼€å¤´å¤šä½™ç©ºè¡Œ
    
    
    return x
```

### å¯¼å…¥

```python
"""
å¯¼å…¥è§„åˆ™
"""

# âœ… æ ‡å‡†åº“
import os
import sys

# âœ… ç¬¬ä¸‰æ–¹åº“
import requests
import numpy as np

# âœ… æœ¬åœ°æ¨¡å—
from my_package import module1
from my_package import module2

# âœ… æ¯è¡Œä¸€ä¸ªå¯¼å…¥
import os
import sys

# âŒ ä¸è¦å¤šä¸ªå¯¼å…¥åœ¨ä¸€è¡Œ
import os, sys  # é”™è¯¯

# âœ… from importå¯ä»¥åœ¨ä¸€è¡Œ
from subprocess import Popen, PIPE

# âœ… æˆ–è€…åˆ†è¡Œ
from subprocess import (
    Popen,
    PIPE,
    STDOUT,
)

# âŒ ä¸è¦ä½¿ç”¨é€šé…ç¬¦å¯¼å…¥
from module import *  # é”™è¯¯

# âœ… ç»å¯¹å¯¼å…¥
from my_package.sub_package import module

# âœ… æ˜¾å¼ç›¸å¯¹å¯¼å…¥
from . import sibling
from ..parent import uncle
```

---

## å‘½åçº¦å®š

### å‘½åé£Žæ ¼

```python
"""
å‘½åçº¦å®š
"""

# âœ… æ¨¡å—å’ŒåŒ…: lowercase_with_underscores
# my_module.py
# my_package/

# âœ… ç±»å: CapWords (PascalCase)
class MyClass:
    pass

class HTTPConnection:
    pass

# âœ… å‡½æ•°å’Œå˜é‡: lowercase_with_underscores
def my_function():
    pass

my_variable = 42

# âœ… å¸¸é‡: UPPERCASE_WITH_UNDERSCORES
MAX_SIZE = 100
API_KEY = "secret"

# âœ… æ–¹æ³•å’Œå®žä¾‹å˜é‡: lowercase_with_underscores
class MyClass:
    def public_method(self):
        self.public_attribute = 1
    
    def _private_method(self):
        self._private_attribute = 2

# âœ… ç±»çš„ç§æœ‰å±žæ€§: __double_leading_underscore
class MyClass:
    def __init__(self):
        self.__private = 1  # åç§°ä¿®é¥°

# âœ… ç±»åž‹å˜é‡: CapWords
from typing import TypeVar

T = TypeVar('T')
KT = TypeVar('KT')  # Key Type
VT = TypeVar('VT')  # Value Type

# âŒ é¿å…å•å­—æ¯åç§° (é™¤äº†è®¡æ•°å™¨å’Œè¿­ä»£å™¨)
# ä½†å¯ä»¥ç”¨äºŽæ•°å­¦ä»£ç 
x = 5  # âœ… æ•°å­¦å˜é‡
i = 0  # âœ… å¾ªçŽ¯è®¡æ•°å™¨
d = {}  # âŒ åº”è¯¥ç”¨ data æˆ– dictionary
```

### ç‰¹æ®Šå‘½å

```python
"""
ç‰¹æ®Šå‘½åæ¨¡å¼
"""

# âœ… å•å‰å¯¼ä¸‹åˆ’çº¿: _internal
# è¡¨ç¤ºå†…éƒ¨ä½¿ç”¨,ä¸ä¼šè¢«from module import *å¯¼å…¥
class MyClass:
    def _internal_method(self):
        """å†…éƒ¨æ–¹æ³•"""
        pass

# âœ… åŒå‰å¯¼ä¸‹åˆ’çº¿: __private
# è§¦å‘åç§°ä¿®é¥°
class MyClass:
    def __init__(self):
        self.__private = 1  # å˜æˆ _MyClass__private

# âœ… åŒå‰åŽä¸‹åˆ’çº¿: __special__
# Pythoné­”æœ¯æ–¹æ³•
class MyClass:
    def __init__(self):
        pass
    
    def __str__(self):
        return "MyClass"

# âœ… å•åŽç¼€ä¸‹åˆ’çº¿: class_
# é¿å…ä¸ŽPythonå…³é”®å­—å†²çª
def function(class_=None):  # é¿å…ä¸Ž class å…³é”®å­—å†²çª
    pass

# âœ… dunderåˆ«å
# __all__: å®šä¹‰from module import *å¯¼å‡ºå†…å®¹
__all__ = ['public_function', 'PublicClass']

# __version__: ç‰ˆæœ¬å·
__version__ = '1.0.0'
```

---

## è¡¨è¾¾å¼å’Œè¯­å¥

### ç©ºæ ¼ä½¿ç”¨

```python
"""
ç©ºæ ¼è§„åˆ™
"""

# âœ… è¿ç®—ç¬¦å‘¨å›´
x = 1 + 2
y = x * 2

# âœ… èµ‹å€¼è¿ç®—ç¬¦
x = 1

# âœ… å‚æ•°é»˜è®¤å€¼ (æ— ç©ºæ ¼)
def function(arg1, arg2=None):
    pass

# âœ… ç±»åž‹æ³¨è§£ (æœ‰ç©ºæ ¼)
def function(arg1: int, arg2: str = None) -> int:
    pass

# âŒ æ‹¬å·å†…ä¾§æ— ç©ºæ ¼
spam(ham[1], {eggs: 2})  # âœ…
spam( ham[ 1 ], { eggs: 2 } )  # âŒ

# âœ… é€—å·ã€åˆ†å·ã€å†’å·åŽé¢æœ‰ç©ºæ ¼
x, y = 1, 2
if x == 4: print(x, y)
d = {'key': 'value'}

# âŒ ä¸è¦å¤šä½™ç©ºæ ¼
x = 1  # âœ…
x=1    # âŒ
x =1   # âŒ

# âœ… åˆ‡ç‰‡
ham[1:9], ham[1:9:3], ham[:9:3], ham[1::3], ham[1:9:]
ham[lower:upper], ham[lower:upper:], ham[lower::step]

# âŒ åˆ‡ç‰‡ä¸è¦ç©ºæ ¼
ham[lower + offset : upper + offset]  # é”™è¯¯
ham[lower + offset:upper + offset]    # âœ…
```

### æ³¨é‡Š

```python
"""
æ³¨é‡Šè§„åˆ™
"""

# âœ… å—æ³¨é‡Š: ä¸Žä»£ç åŒçº§ç¼©è¿›
# è¿™æ˜¯ä¸€ä¸ªå—æ³¨é‡Š
# è¯´æ˜Žä¸‹é¢çš„ä»£ç æ®µ
def function():
    pass

# âœ… è¡Œå†…æ³¨é‡Š: è‡³å°‘2ä¸ªç©ºæ ¼åˆ†éš”
x = x + 1  # è¡¥å¿è¾¹ç•Œ

# âŒ ä¸è¦æ— æ„ä¹‰çš„è¡Œå†…æ³¨é‡Š
x = x + 1  # xåŠ 1  # æ²¡æœ‰é¢å¤–ä¿¡æ¯

# âœ… æ–‡æ¡£å­—ç¬¦ä¸²
def function(arg1, arg2):
    """å‡½æ•°æè¿°
    
    Args:
        arg1: ç¬¬ä¸€ä¸ªå‚æ•°
        arg2: ç¬¬äºŒä¸ªå‚æ•°
    
    Returns:
        è¿”å›žå€¼æè¿°
    """
    pass

# âœ… TODOæ³¨é‡Š
# TODO(username): å…·ä½“è¦åšçš„äº‹æƒ…
# FIXME: éœ€è¦ä¿®å¤çš„é—®é¢˜
# XXX: è­¦å‘Šæˆ–éœ€è¦æ³¨æ„çš„åœ°æ–¹
```

### æ¯”è¾ƒ

```python
"""
æ¯”è¾ƒå’Œæ¡ä»¶
"""

# âœ… Noneæ¯”è¾ƒ: ä½¿ç”¨is/is not
if x is None:
    pass

# âŒ ä¸è¦ç”¨==
if x == None:  # é”™è¯¯
    pass

# âœ… å¸ƒå°”å€¼æ¯”è¾ƒ: ç›´æŽ¥ä½¿ç”¨
if flag:
    pass

# âŒ ä¸è¦æ˜¾å¼æ¯”è¾ƒTrue/False
if flag == True:  # é”™è¯¯
    pass

# âœ… ç©ºåºåˆ—: ç›´æŽ¥åˆ¤æ–­
if not seq:
    pass

# âŒ ä¸è¦ç”¨len()
if len(seq) == 0:  # å•°å—¦
    pass

# âœ… å­—ç¬¦ä¸²åŽç¼€/å‰ç¼€
if filename.endswith('.py'):
    pass

# âŒ ä¸è¦ç”¨åˆ‡ç‰‡
if filename[-3:] == '.py':  # ä¸æŽ¨è
    pass

# âœ… isinstanceæ£€æŸ¥ç±»åž‹
if isinstance(obj, int):
    pass

# âŒ ä¸è¦ç”¨type()
if type(obj) is int:  # ä¸æŽ¨è
    pass
```

---

## è‡ªåŠ¨åŒ–å·¥å…·

### Blackæ ¼å¼åŒ–

```bash
# å®‰è£…black
uv add --dev black

# æ ¼å¼åŒ–æ–‡ä»¶
black script.py

# æ ¼å¼åŒ–ç›®å½•
black src/

# æ£€æŸ¥ä¸å®žé™…ä¿®æ”¹
black --check src/

# æŸ¥çœ‹diff
black --diff src/

# é…ç½®pyproject.toml
cat >> pyproject.toml << EOF
[tool.black]
line-length = 88
target-version = ['py312']
include = '\.pyi?$'
extend-exclude = '''
/(
    \.git
  | \.mypy_cache
  | \.venv
  | build
  | dist
)/
'''
EOF
```

### Ruffæ£€æŸ¥

```bash
# å®‰è£…ruff
uv add --dev ruff

# æ£€æŸ¥ä»£ç 
ruff check src/

# è‡ªåŠ¨ä¿®å¤
ruff check --fix src/

# æ ¼å¼åŒ– (ruff v0.1.0+)
ruff format src/

# é…ç½®pyproject.toml
cat >> pyproject.toml << EOF
[tool.ruff]
line-length = 88
target-version = "py312"

[tool.ruff.lint]
select = [
    "E",   # pycodestyle errors
    "W",   # pycodestyle warnings
    "F",   # pyflakes
    "I",   # isort
    "N",   # pep8-naming
    "UP",  # pyupgrade
]
ignore = [
    "E501",  # line too long (blackå¤„ç†)
]

[tool.ruff.lint.per-file-ignores]
"__init__.py" = ["F401"]  # å¿½ç•¥æœªä½¿ç”¨å¯¼å…¥
EOF
```

### pre-commité›†æˆ

```yaml
# .pre-commit-config.yaml
repos:
  - repo: https://github.com/psf/black
    rev: 23.10.0
    hooks:
      - id: black
        language_version: python3.12
  
  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.1.0
    hooks:
      - id: ruff
        args: [--fix, --exit-non-zero-on-fix]
  
  - repo: https://github.com/pre-commit/mirrors-mypy
    rev: v1.6.0
    hooks:
      - id: mypy
        additional_dependencies: [types-requests]
```

```bash
# å®‰è£…pre-commit
uv add --dev pre-commit

# å®‰è£…hooks
pre-commit install

# æ‰‹åŠ¨è¿è¡Œ
pre-commit run --all-files
```

---

## ðŸ“š æ ¸å¿ƒè¦ç‚¹

### ä»£ç å¸ƒå±€

- âœ… **ç¼©è¿›**: 4ä¸ªç©ºæ ¼
- âœ… **è¡Œé•¿åº¦**: 79-100å­—ç¬¦
- âœ… **ç©ºè¡Œ**: é¡¶çº§2è¡Œ, æ–¹æ³•1è¡Œ
- âœ… **å¯¼å…¥**: åˆ†ç»„, æ¯è¡Œä¸€ä¸ª

### å‘½åçº¦å®š

- âœ… **æ¨¡å—**: lowercase_with_underscores
- âœ… **ç±»**: CapWords
- âœ… **å‡½æ•°/å˜é‡**: lowercase_with_underscores
- âœ… **å¸¸é‡**: UPPERCASE
- âœ… **ç§æœ‰**: _leading_underscore

### è¡¨è¾¾å¼

- âœ… **ç©ºæ ¼**: è¿ç®—ç¬¦å‘¨å›´æœ‰
- âœ… **æ³¨é‡Š**: æ¸…æ™°æœ‰æ„ä¹‰
- âœ… **æ¯”è¾ƒ**: is None, not seq
- âœ… **ç±»åž‹æ£€æŸ¥**: isinstance

### è‡ªåŠ¨åŒ–

- âœ… **black**: è‡ªåŠ¨æ ¼å¼åŒ–
- âœ… **ruff**: å¿«é€Ÿlinter
- âœ… **pre-commit**: Git hooks
- âœ… **CI/CD**: è‡ªåŠ¨æ£€æŸ¥

### åŽŸåˆ™

- âœ… å¯è¯»æ€§ç¬¬ä¸€
- âœ… ä¸€è‡´æ€§é‡è¦
- âœ… å®žç”¨æ€§ä¼˜å…ˆ
- âœ… å›¢é˜Ÿè§„èŒƒ

---

**éµå¾ªPEP 8ï¼Œå†™å‡ºä¼˜é›…Pythonä»£ç ï¼** âœ¨ðŸ“

**ç›¸å…³æ–‡æ¡£**:
- [02-naming.md](02-naming.md) - å‘½åçº¦å®šè¯¦è§£
- [03-documentation.md](03-documentation.md) - æ–‡æ¡£å­—ç¬¦ä¸²

**æœ€åŽæ›´æ–°**: 2025å¹´10æœˆ28æ—¥
