# 03-03-01 é¢å‘å¯¹è±¡ç¼–ç¨‹ (Object-Oriented Programming)

## ğŸ“‹ æ¦‚è¿°

é¢å‘å¯¹è±¡ç¼–ç¨‹ (OOP) æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå°†æ•°æ®å’Œæ“ä½œæ•°æ®çš„æ–¹æ³•ç»„ç»‡æˆå¯¹è±¡ã€‚OOP åŸºäºå››ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€å’ŒæŠ½è±¡ã€‚æœ¬æ–‡æ¡£ä»å½¢å¼ç§‘å­¦è§’åº¦å¯¹ OOP è¿›è¡Œä¸¥æ ¼çš„å½¢å¼åŒ–å®šä¹‰å’Œè¯æ˜ã€‚

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### 1. å¯¹è±¡ (Object)

**å½¢å¼åŒ–å®šä¹‰**ï¼š
å¯¹è±¡æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ $O = (S, M, I)$ï¼Œå…¶ä¸­ï¼š

- $S$ æ˜¯çŠ¶æ€é›†åˆ (State Set)
- $M$ æ˜¯æ–¹æ³•é›†åˆ (Method Set)  
- $I$ æ˜¯æ¥å£é›†åˆ (Interface Set)

**æ•°å­¦è¡¨ç¤º**ï¼š
$$O = \{(s_1, s_2, ..., s_n), (m_1, m_2, ..., m_k), (i_1, i_2, ..., i_l)\}$$

### 2. ç±» (Class)

**å½¢å¼åŒ–å®šä¹‰**ï¼š
ç±»æ˜¯ä¸€ä¸ªå››å…ƒç»„ $C = (A, M, I, T)$ï¼Œå…¶ä¸­ï¼š

- $A$ æ˜¯å±æ€§é›†åˆ (Attributes)
- $M$ æ˜¯æ–¹æ³•é›†åˆ (Methods)
- $I$ æ˜¯æ¥å£é›†åˆ (Interfaces)
- $T$ æ˜¯ç±»å‹çº¦æŸ (Type Constraints)

**æ•°å­¦è¡¨ç¤º**ï¼š
$$C = \{(a_1: T_1, a_2: T_2, ..., a_n: T_n), (m_1, m_2, ..., m_k), (i_1, i_2, ..., i_l), T\}$$

## ğŸ”¬ å½¢å¼åŒ–ç†è®º

### 1. å°è£…æ€§ (Encapsulation)

**å®šä¹‰**ï¼šå°è£…æ˜¯å°†æ•°æ®å’Œæ–¹æ³•ç»‘å®šåœ¨ä¸€èµ·ï¼Œéšè—å†…éƒ¨å®ç°ç»†èŠ‚çš„è¿‡ç¨‹ã€‚

**å½¢å¼åŒ–è¡¨ç¤º**ï¼š
$$\text{Encapsulate}(O) = \{(s, m) | s \in S, m \in M, \text{access}(s) \subseteq \text{private}\}$$

**Python å®ç°**ï¼š

```python
from abc import ABC, abstractmethod
from typing import Any, Dict, List, Optional
from dataclasses import dataclass
import math

@dataclass
class EncapsulatedObject:
    """å°è£…å¯¹è±¡çš„æ•°å­¦å®ç°"""
    
    def __init__(self, state: Dict[str, Any], methods: Dict[str, callable]):
        self._state = state  # ç§æœ‰çŠ¶æ€
        self._methods = methods  # ç§æœ‰æ–¹æ³•
    
    def get_state(self) -> Dict[str, Any]:
        """è·å–çŠ¶æ€çš„å®‰å…¨æ¥å£"""
        return self._state.copy()
    
    def call_method(self, method_name: str, *args, **kwargs) -> Any:
        """è°ƒç”¨æ–¹æ³•çš„ç»Ÿä¸€æ¥å£"""
        if method_name in self._methods:
            return self._methods[method_name](self._state, *args, **kwargs)
        raise AttributeError(f"Method {method_name} not found")

# ç¤ºä¾‹ï¼šé“¶è¡Œè´¦æˆ·çš„å°è£…å®ç°
class BankAccount:
    """é“¶è¡Œè´¦æˆ·çš„å°è£…å®ç°"""
    
    def __init__(self, account_number: str, initial_balance: float = 0.0):
        self._account_number = account_number  # ç§æœ‰å±æ€§
        self._balance = initial_balance
        self._transaction_history = []
    
    def deposit(self, amount: float) -> bool:
        """å­˜æ¬¾æ“ä½œ"""
        if amount > 0:
            self._balance += amount
            self._transaction_history.append(('deposit', amount))
            return True
        return False
    
    def withdraw(self, amount: float) -> bool:
        """å–æ¬¾æ“ä½œ"""
        if 0 < amount <= self._balance:
            self._balance -= amount
            self._transaction_history.append(('withdraw', amount))
            return True
        return False
    
    def get_balance(self) -> float:
        """è·å–ä½™é¢"""
        return self._balance
    
    def get_transaction_count(self) -> int:
        """è·å–äº¤æ˜“æ¬¡æ•°"""
        return len(self._transaction_history)
```

### 2. ç»§æ‰¿æ€§ (Inheritance)

**å®šä¹‰**ï¼šç»§æ‰¿å…è®¸ä¸€ä¸ªç±»ç»§æ‰¿å¦ä¸€ä¸ªç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚

**å½¢å¼åŒ–è¡¨ç¤º**ï¼š
$$\text{Inherit}(C_{child}, C_{parent}) = C_{child} \cup C_{parent}$$

**æ•°å­¦è¯æ˜**ï¼š
è®¾ $C_{parent} = (A_p, M_p, I_p, T_p)$ï¼Œ$C_{child} = (A_c, M_c, I_c, T_c)$

åˆ™ç»§æ‰¿åçš„ç±»ä¸ºï¼š
$$C_{inherited} = (A_p \cup A_c, M_p \cup M_c, I_p \cup I_c, T_p \cap T_c)$$

**Python å®ç°**ï¼š

```python
from typing import TypeVar, Generic, Protocol
from abc import ABC, abstractmethod

T = TypeVar('T')

class Shape(ABC):
    """å½¢çŠ¶åŸºç±» - æŠ½è±¡åŸºç±»"""
    
    def __init__(self, color: str):
        self.color = color
    
    @abstractmethod
    def area(self) -> float:
        """è®¡ç®—é¢ç§¯ - æŠ½è±¡æ–¹æ³•"""
        pass
    
    @abstractmethod
    def perimeter(self) -> float:
        """è®¡ç®—å‘¨é•¿ - æŠ½è±¡æ–¹æ³•"""
        pass
    
    def describe(self) -> str:
        """æè¿°å½¢çŠ¶"""
        return f"A {self.color} shape with area {self.area():.2f}"

class Circle(Shape):
    """åœ†å½¢ç±» - ç»§æ‰¿è‡ªShape"""
    
    def __init__(self, radius: float, color: str = "red"):
        super().__init__(color)
        self.radius = radius
    
    def area(self) -> float:
        """è®¡ç®—åœ†å½¢é¢ç§¯"""
        return math.pi * self.radius ** 2
    
    def perimeter(self) -> float:
        """è®¡ç®—åœ†å½¢å‘¨é•¿"""
        return 2 * math.pi * self.radius

class Rectangle(Shape):
    """çŸ©å½¢ç±» - ç»§æ‰¿è‡ªShape"""
    
    def __init__(self, width: float, height: float, color: str = "blue"):
        super().__init__(color)
        self.width = width
        self.height = height
    
    def area(self) -> float:
        """è®¡ç®—çŸ©å½¢é¢ç§¯"""
        return self.width * self.height
    
    def perimeter(self) -> float:
        """è®¡ç®—çŸ©å½¢å‘¨é•¿"""
        return 2 * (self.width + self.height)
```

### 3. å¤šæ€æ€§ (Polymorphism)

**å®šä¹‰**ï¼šå¤šæ€å…è®¸ä¸åŒå¯¹è±¡å¯¹åŒä¸€æ¶ˆæ¯åšå‡ºä¸åŒå“åº”ã€‚

**å½¢å¼åŒ–è¡¨ç¤º**ï¼š
$$\text{Polymorphic}(m, O_1, O_2, ..., O_n) = \{m(O_1), m(O_2), ..., m(O_n)\}$$

**Python å®ç°**ï¼š

```python
from typing import Union, List, Protocol
from abc import ABC, abstractmethod

class Animal(ABC):
    """åŠ¨ç‰©åŸºç±»"""
    
    @abstractmethod
    def make_sound(self) -> str:
        """å‘å‡ºå£°éŸ³ - æŠ½è±¡æ–¹æ³•"""
        pass
    
    @abstractmethod
    def move(self) -> str:
        """ç§»åŠ¨æ–¹å¼ - æŠ½è±¡æ–¹æ³•"""
        pass

class Dog(Animal):
    """ç‹—ç±»"""
    
    def make_sound(self) -> str:
        return "Woof!"
    
    def move(self) -> str:
        return "Running on four legs"

class Cat(Animal):
    """çŒ«ç±»"""
    
    def make_sound(self) -> str:
        return "Meow!"
    
    def move(self) -> str:
        return "Walking gracefully"

class Bird(Animal):
    """é¸Ÿç±»"""
    
    def make_sound(self) -> str:
        return "Tweet!"
    
    def move(self) -> str:
        return "Flying in the sky"

# å¤šæ€æ€§æ¼”ç¤º
def demonstrate_polymorphism():
    """æ¼”ç¤ºå¤šæ€æ€§"""
    animals: List[Animal] = [
        Dog(),
        Cat(),
        Bird()
    ]
    
    print("=== å¤šæ€æ€§æ¼”ç¤º ===")
    for animal in animals:
        print(f"{animal.__class__.__name__}:")
        print(f"  Sound: {animal.make_sound()}")
        print(f"  Movement: {animal.move()}")
        print()
```

### 4. æŠ½è±¡æ€§ (Abstraction)

**å®šä¹‰**ï¼šæŠ½è±¡æ˜¯éšè—å¤æ‚å®ç°ç»†èŠ‚ï¼Œåªæš´éœ²å¿…è¦æ¥å£çš„è¿‡ç¨‹ã€‚

**å½¢å¼åŒ–è¡¨ç¤º**ï¼š
$$\text{Abstract}(C) = \{i \in I | \text{visibility}(i) = \text{public}\}$$

**Python å®ç°**ï¼š

```python
from abc import ABC, abstractmethod
from typing import Protocol, runtime_checkable

@runtime_checkable
class DatabaseProtocol(Protocol):
    """æ•°æ®åº“åè®® - æŠ½è±¡æ¥å£"""
    
    def connect(self) -> bool:
        """è¿æ¥æ•°æ®åº“"""
        ...
    
    def execute(self, query: str) -> List[Dict]:
        """æ‰§è¡ŒæŸ¥è¯¢"""
        ...
    
    def close(self) -> None:
        """å…³é—­è¿æ¥"""
        ...

class Database(ABC):
    """æ•°æ®åº“æŠ½è±¡åŸºç±»"""
    
    @abstractmethod
    def connect(self) -> bool:
        """è¿æ¥æ•°æ®åº“"""
        pass
    
    @abstractmethod
    def execute(self, query: str) -> List[Dict]:
        """æ‰§è¡ŒæŸ¥è¯¢"""
        pass
    
    @abstractmethod
    def close(self) -> None:
        """å…³é—­è¿æ¥"""
        pass

class MySQLDatabase(Database):
    """MySQLæ•°æ®åº“å®ç°"""
    
    def __init__(self, host: str, port: int, database: str):
        self.host = host
        self.port = port
        self.database = database
        self._connection = None
    
    def connect(self) -> bool:
        """è¿æ¥MySQLæ•°æ®åº“"""
        print(f"Connecting to MySQL at {self.host}:{self.port}")
        self._connection = True
        return True
    
    def execute(self, query: str) -> List[Dict]:
        """æ‰§è¡ŒMySQLæŸ¥è¯¢"""
        if not self._connection:
            raise ConnectionError("Database not connected")
        print(f"Executing MySQL query: {query}")
        return [{"result": "MySQL data"}]
    
    def close(self) -> None:
        """å…³é—­MySQLè¿æ¥"""
        if self._connection:
            print("Closing MySQL connection")
            self._connection = None

class PostgreSQLDatabase(Database):
    """PostgreSQLæ•°æ®åº“å®ç°"""
    
    def __init__(self, host: str, port: int, database: str):
        self.host = host
        self.port = port
        self.database = database
        self._connection = None
    
    def connect(self) -> bool:
        """è¿æ¥PostgreSQLæ•°æ®åº“"""
        print(f"Connecting to PostgreSQL at {self.host}:{self.port}")
        self._connection = True
        return True
    
    def execute(self, query: str) -> List[Dict]:
        """æ‰§è¡ŒPostgreSQLæŸ¥è¯¢"""
        if not self._connection:
            raise ConnectionError("Database not connected")
        print(f"Executing PostgreSQL query: {query}")
        return [{"result": "PostgreSQL data"}]
    
    def close(self) -> None:
        """å…³é—­PostgreSQLè¿æ¥"""
        if self._connection:
            print("Closing PostgreSQL connection")
            self._connection = None

# æŠ½è±¡æ€§æ¼”ç¤º
def demonstrate_abstraction():
    """æ¼”ç¤ºæŠ½è±¡æ€§"""
    databases: List[Database] = [
        MySQLDatabase("localhost", 3306, "test"),
        PostgreSQLDatabase("localhost", 5432, "test")
    ]
    
    print("=== æŠ½è±¡æ€§æ¼”ç¤º ===")
    for db in databases:
        print(f"Using {db.__class__.__name__}:")
        db.connect()
        result = db.execute("SELECT * FROM users")
        print(f"Result: {result}")
        db.close()
        print()
```

## ğŸ”§ è®¾è®¡åŸåˆ™

### 1. SOLID åŸåˆ™

#### å•ä¸€èŒè´£åŸåˆ™ (SRP)

**å®šä¹‰**ï¼šä¸€ä¸ªç±»åº”è¯¥åªæœ‰ä¸€ä¸ªå¼•èµ·å®ƒå˜åŒ–çš„åŸå› ã€‚

**å½¢å¼åŒ–è¡¨ç¤º**ï¼š
$$\text{SRP}(C) = |\text{Responsibilities}(C)| = 1$$

**Python å®ç°**ï¼š

```python
# è¿åSRPçš„ç±»
class UserManager:
    """è¿åSRPçš„ç”¨æˆ·ç®¡ç†ç±»"""
    
    def __init__(self):
        self.users = []
    
    def add_user(self, user):
        """æ·»åŠ ç”¨æˆ·"""
        self.users.append(user)
    
    def remove_user(self, user):
        """åˆ é™¤ç”¨æˆ·"""
        self.users.remove(user)
    
    def save_to_file(self, filename):
        """ä¿å­˜åˆ°æ–‡ä»¶"""
        with open(filename, 'w') as f:
            for user in self.users:
                f.write(f"{user}\n")
    
    def send_email(self, user, message):
        """å‘é€é‚®ä»¶"""
        print(f"Sending email to {user}: {message}")

# ç¬¦åˆSRPçš„ç±»
class UserRepository:
    """ç”¨æˆ·å­˜å‚¨ç±» - å•ä¸€èŒè´£"""
    
    def __init__(self):
        self.users = []
    
    def add_user(self, user):
        """æ·»åŠ ç”¨æˆ·"""
        self.users.append(user)
    
    def remove_user(self, user):
        """åˆ é™¤ç”¨æˆ·"""
        self.users.remove(user)
    
    def get_all_users(self):
        """è·å–æ‰€æœ‰ç”¨æˆ·"""
        return self.users.copy()

class FileStorage:
    """æ–‡ä»¶å­˜å‚¨ç±» - å•ä¸€èŒè´£"""
    
    def save_to_file(self, data, filename):
        """ä¿å­˜æ•°æ®åˆ°æ–‡ä»¶"""
        with open(filename, 'w') as f:
            for item in data:
                f.write(f"{item}\n")

class EmailService:
    """é‚®ä»¶æœåŠ¡ç±» - å•ä¸€èŒè´£"""
    
    def send_email(self, user, message):
        """å‘é€é‚®ä»¶"""
        print(f"Sending email to {user}: {message}")

# ä½¿ç”¨ç»„åˆå®ç°åŠŸèƒ½
class UserService:
    """ç”¨æˆ·æœåŠ¡ç±» - ç»„åˆå¤šä¸ªå•ä¸€èŒè´£çš„ç±»"""
    
    def __init__(self):
        self.repository = UserRepository()
        self.storage = FileStorage()
        self.email_service = EmailService()
    
    def register_user(self, user):
        """æ³¨å†Œç”¨æˆ·"""
        self.repository.add_user(user)
        self.email_service.send_email(user, "Welcome!")
    
    def backup_users(self, filename):
        """å¤‡ä»½ç”¨æˆ·æ•°æ®"""
        users = self.repository.get_all_users()
        self.storage.save_to_file(users, filename)
```

#### å¼€é—­åŸåˆ™ (OCP)

**å®šä¹‰**ï¼šè½¯ä»¶å®ä½“åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ã€‚

**å½¢å¼åŒ–è¡¨ç¤º**ï¼š
$$\text{OCP}(S) = \forall f \in \text{Extensions}: \text{Behavior}(S) = \text{Behavior}(S \cup f)$$

**Python å®ç°**ï¼š

```python
from abc import ABC, abstractmethod
from typing import List, Protocol

class PaymentMethod(Protocol):
    """æ”¯ä»˜æ–¹æ³•åè®®"""
    
    def process_payment(self, amount: float) -> bool:
        """å¤„ç†æ”¯ä»˜"""
        ...

class CreditCardPayment:
    """ä¿¡ç”¨å¡æ”¯ä»˜"""
    
    def process_payment(self, amount: float) -> bool:
        print(f"Processing credit card payment: ${amount}")
        return True

class PayPalPayment:
    """PayPalæ”¯ä»˜"""
    
    def process_payment(self, amount: float) -> bool:
        print(f"Processing PayPal payment: ${amount}")
        return True

class BitcoinPayment:
    """æ¯”ç‰¹å¸æ”¯ä»˜"""
    
    def process_payment(self, amount: float) -> bool:
        print(f"Processing Bitcoin payment: ${amount}")
        return True

class PaymentProcessor:
    """æ”¯ä»˜å¤„ç†å™¨ - ç¬¦åˆå¼€é—­åŸåˆ™"""
    
    def __init__(self):
        self.payment_methods: List[PaymentMethod] = []
    
    def add_payment_method(self, method: PaymentMethod):
        """æ·»åŠ æ”¯ä»˜æ–¹æ³• - å¯¹æ‰©å±•å¼€æ”¾"""
        self.payment_methods.append(method)
    
    def process_payment(self, method_index: int, amount: float) -> bool:
        """å¤„ç†æ”¯ä»˜ - æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç """
        if 0 <= method_index < len(self.payment_methods):
            return self.payment_methods[method_index].process_payment(amount)
        return False

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_ocp():
    """æ¼”ç¤ºå¼€é—­åŸåˆ™"""
    processor = PaymentProcessor()
    
    # æ·»åŠ æ”¯ä»˜æ–¹æ³•
    processor.add_payment_method(CreditCardPayment())
    processor.add_payment_method(PayPalPayment())
    
    # å¤„ç†æ”¯ä»˜
    processor.process_payment(0, 100.0)  # ä¿¡ç”¨å¡
    processor.process_payment(1, 50.0)   # PayPal
    
    # æ‰©å±•æ–°çš„æ”¯ä»˜æ–¹æ³• - æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç 
    processor.add_payment_method(BitcoinPayment())
    processor.process_payment(2, 25.0)   # æ¯”ç‰¹å¸
```

## ğŸ“Š è®¾è®¡æ¨¡å¼åº”ç”¨

### 1. å·¥å‚æ¨¡å¼

```python
from abc import ABC, abstractmethod
from typing import Dict, Type

class Vehicle(ABC):
    """è½¦è¾†æŠ½è±¡åŸºç±»"""
    
    @abstractmethod
    def start(self) -> str:
        pass
    
    @abstractmethod
    def stop(self) -> str:
        pass

class Car(Vehicle):
    """æ±½è½¦ç±»"""
    
    def start(self) -> str:
        return "Car engine started"
    
    def stop(self) -> str:
        return "Car engine stopped"

class Motorcycle(Vehicle):
    """æ‘©æ‰˜è½¦ç±»"""
    
    def start(self) -> str:
        return "Motorcycle engine started"
    
    def stop(self) -> str:
        return "Motorcycle engine stopped"

class VehicleFactory:
    """è½¦è¾†å·¥å‚ç±»"""
    
    def __init__(self):
        self._vehicles: Dict[str, Type[Vehicle]] = {
            'car': Car,
            'motorcycle': Motorcycle
        }
    
    def create_vehicle(self, vehicle_type: str) -> Vehicle:
        """åˆ›å»ºè½¦è¾†"""
        if vehicle_type in self._vehicles:
            return self._vehicles[vehicle_type]()
        raise ValueError(f"Unknown vehicle type: {vehicle_type}")
    
    def register_vehicle(self, name: str, vehicle_class: Type[Vehicle]):
        """æ³¨å†Œæ–°çš„è½¦è¾†ç±»å‹"""
        self._vehicles[name] = vehicle_class

# ä½¿ç”¨å·¥å‚æ¨¡å¼
def demonstrate_factory():
    """æ¼”ç¤ºå·¥å‚æ¨¡å¼"""
    factory = VehicleFactory()
    
    # åˆ›å»ºè½¦è¾†
    car = factory.create_vehicle('car')
    motorcycle = factory.create_vehicle('motorcycle')
    
    print(car.start())
    print(motorcycle.start())
```

### 2. ç­–ç•¥æ¨¡å¼

```python
from abc import ABC, abstractmethod
from typing import List

class SortStrategy(ABC):
    """æ’åºç­–ç•¥æŠ½è±¡åŸºç±»"""
    
    @abstractmethod
    def sort(self, data: List[int]) -> List[int]:
        pass

class BubbleSort(SortStrategy):
    """å†’æ³¡æ’åºç­–ç•¥"""
    
    def sort(self, data: List[int]) -> List[int]:
        result = data.copy()
        n = len(result)
        for i in range(n):
            for j in range(0, n - i - 1):
                if result[j] > result[j + 1]:
                    result[j], result[j + 1] = result[j + 1], result[j]
        return result

class QuickSort(SortStrategy):
    """å¿«é€Ÿæ’åºç­–ç•¥"""
    
    def sort(self, data: List[int]) -> List[int]:
        if len(data) <= 1:
            return data
        pivot = data[len(data) // 2]
        left = [x for x in data if x < pivot]
        middle = [x for x in data if x == pivot]
        right = [x for x in data if x > pivot]
        return self.sort(left) + middle + self.sort(right)

class Sorter:
    """æ’åºå™¨ç±»"""
    
    def __init__(self, strategy: SortStrategy):
        self.strategy = strategy
    
    def set_strategy(self, strategy: SortStrategy):
        """è®¾ç½®æ’åºç­–ç•¥"""
        self.strategy = strategy
    
    def sort(self, data: List[int]) -> List[int]:
        """æ‰§è¡Œæ’åº"""
        return self.strategy.sort(data)

# ä½¿ç”¨ç­–ç•¥æ¨¡å¼
def demonstrate_strategy():
    """æ¼”ç¤ºç­–ç•¥æ¨¡å¼"""
    data = [64, 34, 25, 12, 22, 11, 90]
    
    sorter = Sorter(BubbleSort())
    print("Bubble sort:", sorter.sort(data))
    
    sorter.set_strategy(QuickSort())
    print("Quick sort:", sorter.sort(data))
```

## ğŸ§ª æµ‹è¯•ä¸éªŒè¯

```python
import unittest
from typing import List

class OOPTest(unittest.TestCase):
    """é¢å‘å¯¹è±¡ç¼–ç¨‹æµ‹è¯•ç±»"""
    
    def test_encapsulation(self):
        """æµ‹è¯•å°è£…æ€§"""
        account = BankAccount("12345", 100.0)
        
        # æµ‹è¯•å…¬å…±æ¥å£
        self.assertEqual(account.get_balance(), 100.0)
        self.assertTrue(account.deposit(50.0))
        self.assertEqual(account.get_balance(), 150.0)
    
    def test_inheritance(self):
        """æµ‹è¯•ç»§æ‰¿æ€§"""
        circle = Circle(5.0)
        rectangle = Rectangle(4.0, 6.0)
        
        # æµ‹è¯•ç»§æ‰¿å…³ç³»
        self.assertIsInstance(circle, Shape)
        self.assertIsInstance(rectangle, Shape)
        
        # æµ‹è¯•å¤šæ€æ€§
        self.assertNotEqual(circle.area(), rectangle.area())
    
    def test_polymorphism(self):
        """æµ‹è¯•å¤šæ€æ€§"""
        animals = [Dog(), Cat(), Bird()]
        
        sounds = [animal.make_sound() for animal in animals]
        expected_sounds = ["Woof!", "Meow!", "Tweet!"]
        
        self.assertEqual(sounds, expected_sounds)

if __name__ == '__main__':
    unittest.main()
```

## ğŸ“ˆ æ€§èƒ½åˆ†æ

```python
import time
import cProfile
import pstats
from typing import List

def performance_analysis():
    """æ€§èƒ½åˆ†æ"""
    
    # åˆ›å»ºå¤§é‡å¯¹è±¡æµ‹è¯•æ€§èƒ½
    def create_objects():
        shapes = []
        for i in range(10000):
            if i % 3 == 0:
                shapes.append(Circle(i))
            elif i % 3 == 1:
                shapes.append(Rectangle(i, i + 1))
            else:
                shapes.append(Rectangle(i, i))
        return shapes
    
    # æ€§èƒ½æµ‹è¯•
    start_time = time.time()
    shapes = create_objects()
    creation_time = time.time() - start_time
    
    # è®¡ç®—é¢ç§¯æ€§èƒ½
    start_time = time.time()
    areas = [shape.area() for shape in shapes]
    calculation_time = time.time() - start_time
    
    print(f"å¯¹è±¡åˆ›å»ºæ—¶é—´: {creation_time:.4f} ç§’")
    print(f"é¢ç§¯è®¡ç®—æ—¶é—´: {calculation_time:.4f} ç§’")
    print(f"æ€»å¯¹è±¡æ•°: {len(shapes)}")
    print(f"å¹³å‡æ¯ä¸ªå¯¹è±¡åˆ›å»ºæ—¶é—´: {creation_time/len(shapes)*1000:.2f} æ¯«ç§’")
    print(f"å¹³å‡æ¯ä¸ªé¢ç§¯è®¡ç®—æ—¶é—´: {calculation_time/len(shapes)*1000:.2f} æ¯«ç§’")

# å†…å­˜ä½¿ç”¨åˆ†æ
def memory_analysis():
    """å†…å­˜ä½¿ç”¨åˆ†æ"""
    import sys
    
    shapes = []
    for i in range(1000):
        shapes.append(Circle(i))
    
    total_size = sum(sys.getsizeof(shape) for shape in shapes)
    print(f"1000ä¸ªCircleå¯¹è±¡æ€»å†…å­˜: {total_size} å­—èŠ‚")
    print(f"å¹³å‡æ¯ä¸ªå¯¹è±¡å†…å­˜: {total_size/1000:.2f} å­—èŠ‚")
```

## ğŸ”— ç›¸å…³é“¾æ¥

- [03-01-è®¾è®¡æ¨¡å¼åŸºç¡€](../03-01-è®¾è®¡æ¨¡å¼/03-01-01-è®¾è®¡æ¨¡å¼åŸºç¡€.md)
- [03-02-è½¯ä»¶æ¶æ„åŸºç¡€](../03-02-è½¯ä»¶æ¶æ„/03-02-01-è½¯ä»¶æ¶æ„åŸºç¡€.md)
- [05-01-å¾®æœåŠ¡æ¶æ„](../../05-æ¶æ„é¢†åŸŸ/05-01-å¾®æœåŠ¡æ¶æ„/README.md)

## ğŸ“š å‚è€ƒæ–‡çŒ®

1. Gamma, E., Helm, R., Johnson, R., & Vlissides, J. (1994). Design Patterns: Elements of Reusable Object-Oriented Software.
2. Martin, R. C. (2000). Design Principles and Design Patterns.
3. Liskov, B. (1987). Data Abstraction and Hierarchy.
4. Meyer, B. (1988). Object-Oriented Software Construction.

---

*æœ¬æ–‡æ¡£æä¾›äº†é¢å‘å¯¹è±¡ç¼–ç¨‹çš„å®Œæ•´å½¢å¼åŒ–ç†è®ºæ¡†æ¶ï¼Œä»æ•°å­¦å®šä¹‰åˆ°Pythonå®ç°ï¼Œä¸ºè½¯ä»¶å·¥ç¨‹å®è·µæä¾›ç†è®ºåŸºç¡€ã€‚*
