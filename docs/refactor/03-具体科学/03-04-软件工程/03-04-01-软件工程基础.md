# 03-04-01 è½¯ä»¶å·¥ç¨‹åŸºç¡€

## ğŸ“‹ æ¦‚è¿°

è½¯ä»¶å·¥ç¨‹æ˜¯åº”ç”¨ç³»ç»ŸåŒ–ã€è§„èŒƒåŒ–ã€å¯é‡åŒ–çš„æ–¹æ³•æ¥å¼€å‘ã€è¿è¡Œå’Œç»´æŠ¤è½¯ä»¶çš„å­¦ç§‘ã€‚æœ¬æ–‡æ¡£ä»å½¢å¼åŒ–è§’åº¦é˜è¿°è½¯ä»¶å·¥ç¨‹çš„æ ¸å¿ƒæ¦‚å¿µï¼Œæä¾›ä¸¥æ ¼çš„æ•°å­¦å®šä¹‰å’Œè¯æ˜ï¼Œå¹¶é€šè¿‡Pythonä»£ç å®ç°ç›¸å…³å·¥ç¨‹å®è·µã€‚

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ

### 1. è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ

#### 1.1 å½¢å¼åŒ–å®šä¹‰

**å®šä¹‰ 1.1** (è½¯ä»¶ç”Ÿå‘½å‘¨æœŸ)
è½¯ä»¶ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸€ä¸ªæœ‰åºçš„é˜¶æ®µåºåˆ—ï¼š
$$LC = \{S_1, S_2, ..., S_n\}$$
å…¶ä¸­æ¯ä¸ªé˜¶æ®µ $S_i$ æ»¡è¶³ï¼š
$$S_i \rightarrow S_{i+1} \text{ ä¸” } S_n \rightarrow S_1$$

**å®šä¹‰ 1.2** (é˜¶æ®µè½¬æ¢)
é˜¶æ®µè½¬æ¢å‡½æ•°å®šä¹‰ä¸ºï¼š
$$T: S_i \times \text{Artifact} \rightarrow S_{i+1} \times \text{Artifact}'$$
å…¶ä¸­ $\text{Artifact}$ æ˜¯é˜¶æ®µäº§ç‰©ã€‚

**å®šä¹‰ 1.3** (è´¨é‡åº¦é‡)
è½¯ä»¶è´¨é‡å®šä¹‰ä¸ºï¼š
$$Q(S) = \alpha \cdot \text{Functionality} + \beta \cdot \text{Reliability} + \gamma \cdot \text{Maintainability}$$
å…¶ä¸­ $\alpha, \beta, \gamma$ æ˜¯æƒé‡ç³»æ•°ã€‚

#### 1.2 ç”Ÿå‘½å‘¨æœŸå®šç†

**å®šç† 1.1** (ç”Ÿå‘½å‘¨æœŸå®Œæ•´æ€§)
å¦‚æœè½¯ä»¶ç”Ÿå‘½å‘¨æœŸ $LC$ æ˜¯å®Œæ•´çš„ï¼Œåˆ™æ‰€æœ‰å¿…è¦é˜¶æ®µéƒ½è¢«åŒ…å«ã€‚

**è¯æ˜**:
1. è®¾ $LC$ æ˜¯å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸ
2. æ ¹æ®å®Œæ•´æ€§å®šä¹‰ï¼ŒåŒ…å«éœ€æ±‚ã€è®¾è®¡ã€å®ç°ã€æµ‹è¯•ã€éƒ¨ç½²ã€ç»´æŠ¤
3. å› æ­¤æ‰€æœ‰å¿…è¦é˜¶æ®µéƒ½è¢«åŒ…å«

### 2. éœ€æ±‚å·¥ç¨‹

#### 2.1 å½¢å¼åŒ–å®šä¹‰

**å®šä¹‰ 2.1** (éœ€æ±‚)
éœ€æ±‚æ˜¯ä¸€ä¸ªä¸‰å…ƒç»„ï¼š
$$R = (id, description, constraints)$$
å…¶ä¸­ $id$ æ˜¯éœ€æ±‚æ ‡è¯†ç¬¦ï¼Œ$description$ æ˜¯éœ€æ±‚æè¿°ï¼Œ$constraints$ æ˜¯çº¦æŸæ¡ä»¶ã€‚

**å®šä¹‰ 2.2** (éœ€æ±‚è¿½è¸ª)
éœ€æ±‚è¿½è¸ªæ˜¯ä¸€ä¸ªæ˜ å°„ï¼š
$$RT: \text{Requirement} \rightarrow \text{Artifact}$$
æ»¡è¶³ï¼š
$$\forall r \in \text{Requirement}: RT(r) \text{ å®ç° } r$$

**å®šä¹‰ 2.3** (éœ€æ±‚ä¸€è‡´æ€§)
éœ€æ±‚é›†åˆ $RS$ æ˜¯ä¸€è‡´çš„ï¼Œå½“ä¸”ä»…å½“ï¼š
$$\forall r_1, r_2 \in RS: \neg \text{Conflict}(r_1, r_2)$$

#### 2.2 éœ€æ±‚å·¥ç¨‹å®šç†

**å®šç† 2.1** (éœ€æ±‚å®Œæ•´æ€§)
å¦‚æœéœ€æ±‚é›†åˆ $RS$ æ˜¯å®Œæ•´çš„ï¼Œåˆ™æ‰€æœ‰ç”¨æˆ·éœ€æ±‚éƒ½è¢«è¦†ç›–ã€‚

**è¯æ˜**:
1. è®¾ $RS$ æ˜¯å®Œæ•´çš„éœ€æ±‚é›†åˆ
2. æ ¹æ®å®Œæ•´æ€§å®šä¹‰ï¼Œæ‰€æœ‰ç”¨æˆ·éœ€æ±‚éƒ½åœ¨ $RS$ ä¸­
3. å› æ­¤éœ€æ±‚é›†åˆæ˜¯å®Œæ•´çš„

### 3. è½¯ä»¶æµ‹è¯•

#### 3.1 å½¢å¼åŒ–å®šä¹‰

**å®šä¹‰ 3.1** (æµ‹è¯•ç”¨ä¾‹)
æµ‹è¯•ç”¨ä¾‹æ˜¯ä¸€ä¸ªå››å…ƒç»„ï¼š
$$TC = (input, expected_output, precondition, postcondition)$$

**å®šä¹‰ 3.2** (æµ‹è¯•è¦†ç›–ç‡)
æµ‹è¯•è¦†ç›–ç‡å®šä¹‰ä¸ºï¼š
$$C(T) = \frac{|\text{Covered Elements}|}{|\text{Total Elements}|}$$

**å®šä¹‰ 3.3** (æµ‹è¯•æœ‰æ•ˆæ€§)
æµ‹è¯•æœ‰æ•ˆæ€§å®šä¹‰ä¸ºï¼š
$$E(T) = \frac{|\text{Detected Defects}|}{|\text{Total Defects}|}$$

#### 3.2 è½¯ä»¶æµ‹è¯•å®šç†

**å®šç† 3.1** (æµ‹è¯•å……åˆ†æ€§)
å¦‚æœæµ‹è¯•è¦†ç›–ç‡ $C(T) = 1$ï¼Œåˆ™æµ‹è¯•æ˜¯å……åˆ†çš„ã€‚

**è¯æ˜**:
1. è®¾æµ‹è¯•è¦†ç›–ç‡ $C(T) = 1$
2. æ ¹æ®è¦†ç›–ç‡å®šä¹‰ï¼Œæ‰€æœ‰å…ƒç´ éƒ½è¢«æµ‹è¯•
3. å› æ­¤æµ‹è¯•æ˜¯å……åˆ†çš„

## ğŸ Pythonå®ç°

### 1. è½¯ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†

```python
from abc import ABC, abstractmethod
from typing import Dict, List, Any, Optional, Set
from dataclasses import dataclass, field
from enum import Enum
import uuid
import time
from datetime import datetime

class LifecycleStage(Enum):
    """ç”Ÿå‘½å‘¨æœŸé˜¶æ®µæšä¸¾"""
    REQUIREMENTS = "requirements"
    DESIGN = "design"
    IMPLEMENTATION = "implementation"
    TESTING = "testing"
    DEPLOYMENT = "deployment"
    MAINTENANCE = "maintenance"

class ArtifactType(Enum):
    """äº§ç‰©ç±»å‹æšä¸¾"""
    DOCUMENT = "document"
    CODE = "code"
    TEST = "test"
    CONFIG = "config"
    DATA = "data"

@dataclass
class Artifact:
    """äº§ç‰©ç±»"""
    id: str
    name: str
    artifact_type: ArtifactType
    content: Any
    created_at: datetime = field(default_factory=datetime.now)
    updated_at: datetime = field(default_factory=datetime.now)
    version: str = "1.0.0"
    
    def __post_init__(self):
        if not self.id:
            self.id = str(uuid.uuid4())

@dataclass
class Stage:
    """é˜¶æ®µç±»"""
    name: LifecycleStage
    artifacts: List[Artifact] = field(default_factory=list)
    start_date: Optional[datetime] = None
    end_date: Optional[datetime] = None
    status: str = "pending"
    
    def add_artifact(self, artifact: Artifact) -> None:
        """æ·»åŠ äº§ç‰©"""
        self.artifacts.append(artifact)
        self.updated_at = datetime.now()
    
    def complete(self) -> None:
        """å®Œæˆé˜¶æ®µ"""
        self.end_date = datetime.now()
        self.status = "completed"

class SoftwareLifecycle:
    """è½¯ä»¶ç”Ÿå‘½å‘¨æœŸç±»"""
    
    def __init__(self, project_name: str):
        self.project_name = project_name
        self.stages: Dict[LifecycleStage, Stage] = {}
        self.current_stage: Optional[LifecycleStage] = None
        self.stage_order = [
            LifecycleStage.REQUIREMENTS,
            LifecycleStage.DESIGN,
            LifecycleStage.IMPLEMENTATION,
            LifecycleStage.TESTING,
            LifecycleStage.DEPLOYMENT,
            LifecycleStage.MAINTENANCE
        ]
        
        # åˆå§‹åŒ–æ‰€æœ‰é˜¶æ®µ
        for stage_enum in self.stage_order:
            self.stages[stage_enum] = Stage(stage_enum)
    
    def start_stage(self, stage: LifecycleStage) -> None:
        """å¼€å§‹é˜¶æ®µ"""
        if stage in self.stages:
            self.stages[stage].start_date = datetime.now()
            self.stages[stage].status = "in_progress"
            self.current_stage = stage
        else:
            raise ValueError(f"é˜¶æ®µ {stage} ä¸å­˜åœ¨")
    
    def complete_stage(self, stage: LifecycleStage) -> None:
        """å®Œæˆé˜¶æ®µ"""
        if stage in self.stages:
            self.stages[stage].complete()
            self.current_stage = None
        else:
            raise ValueError(f"é˜¶æ®µ {stage} ä¸å­˜åœ¨")
    
    def add_artifact_to_stage(self, stage: LifecycleStage, artifact: Artifact) -> None:
        """å‘é˜¶æ®µæ·»åŠ äº§ç‰©"""
        if stage in self.stages:
            self.stages[stage].add_artifact(artifact)
        else:
            raise ValueError(f"é˜¶æ®µ {stage} ä¸å­˜åœ¨")
    
    def get_stage_artifacts(self, stage: LifecycleStage) -> List[Artifact]:
        """è·å–é˜¶æ®µçš„äº§ç‰©"""
        if stage in self.stages:
            return self.stages[stage].artifacts
        return []
    
    def validate_stage_transition(self, from_stage: LifecycleStage, to_stage: LifecycleStage) -> bool:
        """éªŒè¯é˜¶æ®µè½¬æ¢"""
        try:
            from_index = self.stage_order.index(from_stage)
            to_index = self.stage_order.index(to_stage)
            return to_index == from_index + 1 or to_index == 0  # å…è®¸å¾ªç¯
        except ValueError:
            return False
    
    def get_project_status(self) -> Dict[str, Any]:
        """è·å–é¡¹ç›®çŠ¶æ€"""
        return {
            "project_name": self.project_name,
            "current_stage": self.current_stage.value if self.current_stage else None,
            "stages": {
                stage.value: {
                    "status": stage_info.status,
                    "start_date": stage_info.start_date.isoformat() if stage_info.start_date else None,
                    "end_date": stage_info.end_date.isoformat() if stage_info.end_date else None,
                    "artifact_count": len(stage_info.artifacts)
                }
                for stage, stage_info in self.stages.items()
            }
        }

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_lifecycle():
    """æ¼”ç¤ºè½¯ä»¶ç”Ÿå‘½å‘¨æœŸ"""
    
    # åˆ›å»ºç”Ÿå‘½å‘¨æœŸ
    lifecycle = SoftwareLifecycle("åœ¨çº¿è´­ç‰©ç³»ç»Ÿ")
    
    # å¼€å§‹éœ€æ±‚é˜¶æ®µ
    lifecycle.start_stage(LifecycleStage.REQUIREMENTS)
    
    # æ·»åŠ éœ€æ±‚æ–‡æ¡£
    requirements_doc = Artifact(
        "req_doc_1",
        "ç”¨æˆ·éœ€æ±‚æ–‡æ¡£",
        ArtifactType.DOCUMENT,
        "ç”¨æˆ·èƒ½å¤Ÿæµè§ˆå•†å“ã€æ·»åŠ è´­ç‰©è½¦ã€ä¸‹å•æ”¯ä»˜..."
    )
    lifecycle.add_artifact_to_stage(LifecycleStage.REQUIREMENTS, requirements_doc)
    
    # å®Œæˆéœ€æ±‚é˜¶æ®µ
    lifecycle.complete_stage(LifecycleStage.REQUIREMENTS)
    
    # å¼€å§‹è®¾è®¡é˜¶æ®µ
    lifecycle.start_stage(LifecycleStage.DESIGN)
    
    # æ·»åŠ è®¾è®¡æ–‡æ¡£
    design_doc = Artifact(
        "design_doc_1",
        "ç³»ç»Ÿæ¶æ„è®¾è®¡",
        ArtifactType.DOCUMENT,
        "é‡‡ç”¨å¾®æœåŠ¡æ¶æ„ï¼ŒåŒ…å«ç”¨æˆ·æœåŠ¡ã€å•†å“æœåŠ¡ã€è®¢å•æœåŠ¡..."
    )
    lifecycle.add_artifact_to_stage(LifecycleStage.DESIGN, design_doc)
    
    # å®Œæˆè®¾è®¡é˜¶æ®µ
    lifecycle.complete_stage(LifecycleStage.DESIGN)
    
    # æ˜¾ç¤ºé¡¹ç›®çŠ¶æ€
    status = lifecycle.get_project_status()
    print(f"é¡¹ç›®çŠ¶æ€: {status}")
    
    return lifecycle
```

### 2. éœ€æ±‚å·¥ç¨‹ç³»ç»Ÿ

```python
from typing import Dict, List, Any, Optional, Set
from dataclasses import dataclass, field
import re

@dataclass
class Requirement:
    """éœ€æ±‚ç±»"""
    id: str
    title: str
    description: str
    priority: int = 1  # 1-5ï¼Œ5ä¸ºæœ€é«˜ä¼˜å…ˆçº§
    category: str = "functional"
    constraints: List[str] = field(default_factory=list)
    dependencies: List[str] = field(default_factory=list)
    status: str = "draft"
    
    def __post_init__(self):
        if not self.id:
            self.id = f"REQ-{uuid.uuid4().hex[:8].upper()}"

@dataclass
class RequirementTrace:
    """éœ€æ±‚è¿½è¸ªç±»"""
    requirement_id: str
    artifact_id: str
    artifact_type: ArtifactType
    trace_type: str = "implements"  # implements, tests, documents

class RequirementsManager:
    """éœ€æ±‚ç®¡ç†å™¨"""
    
    def __init__(self):
        self.requirements: Dict[str, Requirement] = {}
        self.traces: List[RequirementTrace] = []
        self.categories: Set[str] = set()
    
    def add_requirement(self, requirement: Requirement) -> None:
        """æ·»åŠ éœ€æ±‚"""
        self.requirements[requirement.id] = requirement
        self.categories.add(requirement.category)
    
    def update_requirement(self, req_id: str, **kwargs) -> None:
        """æ›´æ–°éœ€æ±‚"""
        if req_id in self.requirements:
            req = self.requirements[req_id]
            for key, value in kwargs.items():
                if hasattr(req, key):
                    setattr(req, key, value)
        else:
            raise ValueError(f"éœ€æ±‚ {req_id} ä¸å­˜åœ¨")
    
    def get_requirement(self, req_id: str) -> Optional[Requirement]:
        """è·å–éœ€æ±‚"""
        return self.requirements.get(req_id)
    
    def get_requirements_by_category(self, category: str) -> List[Requirement]:
        """æŒ‰ç±»åˆ«è·å–éœ€æ±‚"""
        return [req for req in self.requirements.values() if req.category == category]
    
    def get_requirements_by_priority(self, priority: int) -> List[Requirement]:
        """æŒ‰ä¼˜å…ˆçº§è·å–éœ€æ±‚"""
        return [req for req in self.requirements.values() if req.priority == priority]
    
    def add_trace(self, trace: RequirementTrace) -> None:
        """æ·»åŠ è¿½è¸ªå…³ç³»"""
        if trace.requirement_id in self.requirements:
            self.traces.append(trace)
        else:
            raise ValueError(f"éœ€æ±‚ {trace.requirement_id} ä¸å­˜åœ¨")
    
    def get_traces_for_requirement(self, req_id: str) -> List[RequirementTrace]:
        """è·å–éœ€æ±‚çš„è¿½è¸ªå…³ç³»"""
        return [trace for trace in self.traces if trace.requirement_id == req_id]
    
    def validate_requirements(self) -> Dict[str, List[str]]:
        """éªŒè¯éœ€æ±‚ä¸€è‡´æ€§"""
        issues = {
            "conflicts": [],
            "missing_dependencies": [],
            "incomplete": []
        }
        
        # æ£€æŸ¥å†²çª
        for req1 in self.requirements.values():
            for req2 in self.requirements.values():
                if req1.id != req2.id and self._check_conflict(req1, req2):
                    issues["conflicts"].append(f"{req1.id} ä¸ {req2.id} å†²çª")
        
        # æ£€æŸ¥ç¼ºå¤±ä¾èµ–
        for req in self.requirements.values():
            for dep_id in req.dependencies:
                if dep_id not in self.requirements:
                    issues["missing_dependencies"].append(f"{req.id} ä¾èµ– {dep_id} ä¸å­˜åœ¨")
        
        # æ£€æŸ¥å®Œæ•´æ€§
        for req in self.requirements.values():
            if not req.description or len(req.description.strip()) < 10:
                issues["incomplete"].append(f"{req.id} æè¿°ä¸å®Œæ•´")
        
        return issues
    
    def _check_conflict(self, req1: Requirement, req2: Requirement) -> bool:
        """æ£€æŸ¥éœ€æ±‚å†²çª"""
        # ç®€å•çš„å†²çªæ£€æµ‹ï¼šæ ‡é¢˜ç›¸ä¼¼ä½†æè¿°çŸ›ç›¾
        if req1.title.lower() == req2.title.lower():
            # æ£€æŸ¥æè¿°ä¸­çš„å¦å®šè¯
            neg_words = ["ä¸", "ä¸èƒ½", "ç¦æ­¢", "æ‹’ç»", "no", "not", "cannot"]
            req1_neg = any(word in req1.description.lower() for word in neg_words)
            req2_neg = any(word in req2.description.lower() for word in neg_words)
            return req1_neg != req2_neg
        return False
    
    def generate_requirements_report(self) -> Dict[str, Any]:
        """ç”Ÿæˆéœ€æ±‚æŠ¥å‘Š"""
        total_reqs = len(self.requirements)
        completed_reqs = len([req for req in self.requirements.values() if req.status == "completed"])
        
        return {
            "total_requirements": total_reqs,
            "completed_requirements": completed_reqs,
            "completion_rate": completed_reqs / total_reqs if total_reqs > 0 else 0,
            "categories": list(self.categories),
            "priority_distribution": {
                i: len(self.get_requirements_by_priority(i)) 
                for i in range(1, 6)
            },
            "validation_issues": self.validate_requirements()
        }

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_requirements_engineering():
    """æ¼”ç¤ºéœ€æ±‚å·¥ç¨‹"""
    
    # åˆ›å»ºéœ€æ±‚ç®¡ç†å™¨
    req_manager = RequirementsManager()
    
    # æ·»åŠ éœ€æ±‚
    req1 = Requirement(
        "REQ-001",
        "ç”¨æˆ·æ³¨å†Œ",
        "ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡é‚®ç®±å’Œå¯†ç æ³¨å†Œæ–°è´¦æˆ·",
        priority=5,
        category="authentication"
    )
    
    req2 = Requirement(
        "REQ-002",
        "ç”¨æˆ·ç™»å½•",
        "å·²æ³¨å†Œç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨é‚®ç®±å’Œå¯†ç ç™»å½•ç³»ç»Ÿ",
        priority=5,
        category="authentication",
        dependencies=["REQ-001"]
    )
    
    req3 = Requirement(
        "REQ-003",
        "å•†å“æµè§ˆ",
        "ç”¨æˆ·èƒ½å¤Ÿæµè§ˆå•†å“åˆ—è¡¨å’Œå•†å“è¯¦æƒ…",
        priority=4,
        category="product"
    )
    
    req_manager.add_requirement(req1)
    req_manager.add_requirement(req2)
    req_manager.add_requirement(req3)
    
    # æ·»åŠ è¿½è¸ªå…³ç³»
    trace1 = RequirementTrace("REQ-001", "user_service.py", ArtifactType.CODE)
    trace2 = RequirementTrace("REQ-002", "auth_service.py", ArtifactType.CODE)
    trace3 = RequirementTrace("REQ-003", "product_service.py", ArtifactType.CODE)
    
    req_manager.add_trace(trace1)
    req_manager.add_trace(trace2)
    req_manager.add_trace(trace3)
    
    # ç”ŸæˆæŠ¥å‘Š
    report = req_manager.generate_requirements_report()
    print(f"éœ€æ±‚æŠ¥å‘Š: {report}")
    
    return req_manager
```

### 3. è½¯ä»¶æµ‹è¯•æ¡†æ¶

```python
from typing import Dict, List, Any, Optional, Callable
from dataclasses import dataclass, field
import time
import traceback

@dataclass
class TestCase:
    """æµ‹è¯•ç”¨ä¾‹ç±»"""
    id: str
    name: str
    input_data: Any
    expected_output: Any
    precondition: Optional[str] = None
    postcondition: Optional[str] = None
    category: str = "unit"
    priority: int = 1
    
    def __post_init__(self):
        if not self.id:
            self.id = f"TC-{uuid.uuid4().hex[:8].upper()}"

@dataclass
class TestResult:
    """æµ‹è¯•ç»“æœç±»"""
    test_case_id: str
    status: str  # passed, failed, error, skipped
    actual_output: Any = None
    execution_time: float = 0.0
    error_message: Optional[str] = None
    timestamp: datetime = field(default_factory=datetime.now)

class TestRunner:
    """æµ‹è¯•è¿è¡Œå™¨"""
    
    def __init__(self):
        self.test_cases: Dict[str, TestCase] = {}
        self.test_results: List[TestResult] = []
        self.test_functions: Dict[str, Callable] = {}
    
    def add_test_case(self, test_case: TestCase) -> None:
        """æ·»åŠ æµ‹è¯•ç”¨ä¾‹"""
        self.test_cases[test_case.id] = test_case
    
    def register_test_function(self, test_case_id: str, test_func: Callable) -> None:
        """æ³¨å†Œæµ‹è¯•å‡½æ•°"""
        self.test_functions[test_case_id] = test_func
    
    def run_test(self, test_case_id: str) -> TestResult:
        """è¿è¡Œå•ä¸ªæµ‹è¯•"""
        if test_case_id not in self.test_cases:
            raise ValueError(f"æµ‹è¯•ç”¨ä¾‹ {test_case_id} ä¸å­˜åœ¨")
        
        test_case = self.test_cases[test_case_id]
        start_time = time.time()
        
        try:
            # æ£€æŸ¥å‰ç½®æ¡ä»¶
            if test_case.precondition and not self._check_precondition(test_case.precondition):
                result = TestResult(
                    test_case_id=test_case_id,
                    status="skipped",
                    error_message=f"å‰ç½®æ¡ä»¶ä¸æ»¡è¶³: {test_case.precondition}"
                )
            else:
                # æ‰§è¡Œæµ‹è¯•
                if test_case_id in self.test_functions:
                    actual_output = self.test_functions[test_case_id](test_case.input_data)
                else:
                    actual_output = self._default_test_execution(test_case)
                
                # éªŒè¯ç»“æœ
                if self._compare_output(actual_output, test_case.expected_output):
                    result = TestResult(
                        test_case_id=test_case_id,
                        status="passed",
                        actual_output=actual_output
                    )
                else:
                    result = TestResult(
                        test_case_id=test_case_id,
                        status="failed",
                        actual_output=actual_output,
                        error_message=f"æœŸæœ›è¾“å‡º: {test_case.expected_output}, å®é™…è¾“å‡º: {actual_output}"
                    )
                
                # æ£€æŸ¥åç½®æ¡ä»¶
                if test_case.postcondition and not self._check_postcondition(test_case.postcondition):
                    result.status = "failed"
                    result.error_message = f"åç½®æ¡ä»¶ä¸æ»¡è¶³: {test_case.postcondition}"
            
        except Exception as e:
            result = TestResult(
                test_case_id=test_case_id,
                status="error",
                error_message=str(e)
            )
        
        result.execution_time = time.time() - start_time
        self.test_results.append(result)
        return result
    
    def run_all_tests(self) -> List[TestResult]:
        """è¿è¡Œæ‰€æœ‰æµ‹è¯•"""
        results = []
        for test_case_id in self.test_cases:
            result = self.run_test(test_case_id)
            results.append(result)
        return results
    
    def _default_test_execution(self, test_case: TestCase) -> Any:
        """é»˜è®¤æµ‹è¯•æ‰§è¡Œ"""
        # ç®€å•çš„è¾“å…¥è¾“å‡ºæµ‹è¯•
        return test_case.input_data
    
    def _compare_output(self, actual: Any, expected: Any) -> bool:
        """æ¯”è¾ƒè¾“å‡º"""
        return actual == expected
    
    def _check_precondition(self, precondition: str) -> bool:
        """æ£€æŸ¥å‰ç½®æ¡ä»¶"""
        # ç®€å•çš„æ¡ä»¶æ£€æŸ¥
        return True
    
    def _check_postcondition(self, postcondition: str) -> bool:
        """æ£€æŸ¥åç½®æ¡ä»¶"""
        # ç®€å•çš„æ¡ä»¶æ£€æŸ¥
        return True
    
    def get_test_coverage(self) -> Dict[str, float]:
        """è·å–æµ‹è¯•è¦†ç›–ç‡"""
        total_tests = len(self.test_cases)
        passed_tests = len([r for r in self.test_results if r.status == "passed"])
        failed_tests = len([r for r in self.test_results if r.status == "failed"])
        error_tests = len([r for r in self.test_results if r.status == "error"])
        skipped_tests = len([r for r in self.test_results if r.status == "skipped"])
        
        return {
            "total_tests": total_tests,
            "passed_tests": passed_tests,
            "failed_tests": failed_tests,
            "error_tests": error_tests,
            "skipped_tests": skipped_tests,
            "pass_rate": passed_tests / total_tests if total_tests > 0 else 0,
            "coverage_rate": (passed_tests + failed_tests) / total_tests if total_tests > 0 else 0
        }
    
    def generate_test_report(self) -> Dict[str, Any]:
        """ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š"""
        coverage = self.get_test_coverage()
        
        # æŒ‰ç±»åˆ«ç»Ÿè®¡
        category_stats = {}
        for test_case in self.test_cases.values():
            if test_case.category not in category_stats:
                category_stats[test_case.category] = {"total": 0, "passed": 0, "failed": 0}
            category_stats[test_case.category]["total"] += 1
        
        for result in self.test_results:
            test_case = self.test_cases[result.test_case_id]
            if result.status == "passed":
                category_stats[test_case.category]["passed"] += 1
            elif result.status == "failed":
                category_stats[test_case.category]["failed"] += 1
        
        return {
            **coverage,
            "category_statistics": category_stats,
            "test_results": [
                {
                    "test_case_id": result.test_case_id,
                    "test_name": self.test_cases[result.test_case_id].name,
                    "status": result.status,
                    "execution_time": result.execution_time,
                    "error_message": result.error_message
                }
                for result in self.test_results
            ]
        }

# ä½¿ç”¨ç¤ºä¾‹
def demonstrate_testing():
    """æ¼”ç¤ºè½¯ä»¶æµ‹è¯•"""
    
    # åˆ›å»ºæµ‹è¯•è¿è¡Œå™¨
    test_runner = TestRunner()
    
    # æ·»åŠ æµ‹è¯•ç”¨ä¾‹
    tc1 = TestCase(
        "TC-001",
        "åŠ æ³•æµ‹è¯•",
        input_data={"a": 2, "b": 3},
        expected_output=5,
        category="unit"
    )
    
    tc2 = TestCase(
        "TC-002",
        "å­—ç¬¦ä¸²è¿æ¥æµ‹è¯•",
        input_data={"s1": "Hello", "s2": "World"},
        expected_output="HelloWorld",
        category="unit"
    )
    
    tc3 = TestCase(
        "TC-003",
        "ç”¨æˆ·æ³¨å†Œæµ‹è¯•",
        input_data={"email": "test@example.com", "password": "123456"},
        expected_output={"status": "success", "user_id": "user_123"},
        category="integration"
    )
    
    test_runner.add_test_case(tc1)
    test_runner.add_test_case(tc2)
    test_runner.add_test_case(tc3)
    
    # æ³¨å†Œæµ‹è¯•å‡½æ•°
    def test_addition(input_data):
        return input_data["a"] + input_data["b"]
    
    def test_string_concat(input_data):
        return input_data["s1"] + input_data["s2"]
    
    def test_user_registration(input_data):
        # æ¨¡æ‹Ÿç”¨æˆ·æ³¨å†Œ
        return {"status": "success", "user_id": "user_123"}
    
    test_runner.register_test_function("TC-001", test_addition)
    test_runner.register_test_function("TC-002", test_string_concat)
    test_runner.register_test_function("TC-003", test_user_registration)
    
    # è¿è¡Œæµ‹è¯•
    results = test_runner.run_all_tests()
    
    # ç”ŸæˆæŠ¥å‘Š
    report = test_runner.generate_test_report()
    print(f"æµ‹è¯•æŠ¥å‘Š: {report}")
    
    return test_runner
```

## ğŸ“Š æ•°å­¦è¯æ˜

### 1. è½¯ä»¶è´¨é‡å®šç†

**å®šç† 1.1** (è½¯ä»¶è´¨é‡ä¼˜åŒ–)
é€šè¿‡å¢åŠ æµ‹è¯•è¦†ç›–ç‡å’Œä»£ç å®¡æŸ¥ï¼Œè½¯ä»¶è´¨é‡å¯ä»¥å¾—åˆ°æå‡ã€‚

**è¯æ˜**:
1. è®¾è½¯ä»¶è´¨é‡ $Q(S) = \alpha \cdot F + \beta \cdot R + \gamma \cdot M$
2. å¢åŠ æµ‹è¯•è¦†ç›–ç‡æé«˜å¯é æ€§ $R$
3. ä»£ç å®¡æŸ¥æé«˜å¯ç»´æŠ¤æ€§ $M$
4. å› æ­¤ $Q(S)$ å¾—åˆ°æå‡

### 2. éœ€æ±‚ä¸€è‡´æ€§å®šç†

**å®šç† 1.2** (éœ€æ±‚ä¸€è‡´æ€§)
å¦‚æœéœ€æ±‚é›†åˆ $RS$ æ˜¯ä¸€è‡´çš„ï¼Œåˆ™ä¸å­˜åœ¨å†²çªçš„éœ€æ±‚ã€‚

**è¯æ˜**:
1. è®¾ $RS$ æ˜¯ä¸€è‡´çš„éœ€æ±‚é›†åˆ
2. æ ¹æ®ä¸€è‡´æ€§å®šä¹‰ï¼Œ$\forall r_1, r_2 \in RS: \neg \text{Conflict}(r_1, r_2)$
3. å› æ­¤ä¸å­˜åœ¨å†²çªçš„éœ€æ±‚

## ğŸ”— ç›¸å…³æ¦‚å¿µ

- [è½¯ä»¶æ¶æ„ç†è®º](../03-02-è½¯ä»¶æ¶æ„/README.md)
- [ç³»ç»Ÿè®¾è®¡ç†è®º](../03-03-ç³»ç»Ÿè®¾è®¡/README.md)
- [é¡¹ç›®ç®¡ç†ç†è®º](../03-05-é¡¹ç›®ç®¡ç†/README.md)
- [è´¨é‡ä¿è¯ç†è®º](../03-06-è´¨é‡ä¿è¯/README.md)

## ğŸ“š å‚è€ƒæ–‡çŒ®

1. Sommerville, I. (2015). Software Engineering
2. Pressman, R. S. (2014). Software Engineering: A Practitioner's Approach
3. Pfleeger, S. L., & Atlee, J. M. (2009). Software Engineering: Theory and Practice
4. Boehm, B. W. (2006). Software Engineering Economics
5. Humphrey, W. S. (2005). PSP: A Self-Improvement Process for Software Engineers

---

*è½¯ä»¶å·¥ç¨‹ä¸ºè½¯ä»¶å¼€å‘æä¾›äº†ç³»ç»ŸåŒ–çš„æ–¹æ³•è®ºï¼Œé€šè¿‡å½¢å¼åŒ–çš„æ•°å­¦å®šä¹‰å’Œä¸¥æ ¼çš„è¯æ˜ï¼Œæˆ‘ä»¬å»ºç«‹äº†è½¯ä»¶å·¥ç¨‹çš„å®Œæ•´ç†è®ºä½“ç³»ã€‚* 