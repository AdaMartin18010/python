# Webåº”ç”¨å¼€å‘é¡¹ç›®æ¨¡æ¿

## ğŸ“‹ æ¦‚è¿°

Webåº”ç”¨å¼€å‘é¡¹ç›®æ¨¡æ¿æä¾›äº†æ„å»ºç°ä»£åŒ–Webåº”ç”¨çš„å®Œæ•´æ¡†æ¶ï¼ŒåŒ…æ‹¬å‰ç«¯ã€åç«¯ã€æ•°æ®åº“å’Œéƒ¨ç½²é…ç½®ã€‚

## 1. é¡¹ç›®ç»“æ„

### 1.1 ç›®å½•ç»“æ„

```text
web-app-template/
â”œâ”€â”€ frontend/                 # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # Reactç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/          # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ styles/         # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ public/             # é™æ€èµ„æº
â”‚   â””â”€â”€ package.json        # å‰ç«¯ä¾èµ–
â”œâ”€â”€ backend/                 # åç«¯API
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ controllers/    # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ models/         # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ routes/         # è·¯ç”±å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ tests/              # æµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ requirements.txt    # Pythonä¾èµ–
â”œâ”€â”€ database/               # æ•°æ®åº“é…ç½®
â”‚   â”œâ”€â”€ migrations/         # æ•°æ®åº“è¿ç§»
â”‚   â””â”€â”€ seeds/             # åˆå§‹æ•°æ®
â”œâ”€â”€ docker/                 # Dockeré…ç½®
â”‚   â”œâ”€â”€ Dockerfile.frontend
â”‚   â”œâ”€â”€ Dockerfile.backend
â”‚   â””â”€â”€ docker-compose.yml
â””â”€â”€ docs/                   # é¡¹ç›®æ–‡æ¡£
```

## 2. Pythonå®ç°

### 2.1 åç«¯APIæ¡†æ¶

```python
from flask import Flask, request, jsonify
from flask_cors import CORS
from flask_sqlalchemy import SQLAlchemy
from flask_jwt_extended import JWTManager, create_access_token
import os

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = os.getenv('DATABASE_URL', 'sqlite:///app.db')
app.config['JWT_SECRET_KEY'] = os.getenv('JWT_SECRET_KEY', 'secret')
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

CORS(app)
db = SQLAlchemy(app)
jwt = JWTManager(app)

# æ•°æ®æ¨¡å‹
class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password_hash = db.Column(db.String(120), nullable=False)

class Task(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(200), nullable=False)
    description = db.Column(db.Text)
    completed = db.Column(db.Boolean, default=False)
    user_id = db.Column(db.Integer, db.ForeignKey('user.id'), nullable=False)

# APIè·¯ç”±
@app.route('/api/users', methods=['POST'])
def create_user():
    data = request.get_json()
    user = User(username=data['username'], email=data['email'])
    user.set_password(data['password'])
    db.session.add(user)
    db.session.commit()
    return jsonify({'message': 'User created successfully'}), 201

@app.route('/api/tasks', methods=['GET'])
def get_tasks():
    tasks = Task.query.all()
    return jsonify([{
        'id': task.id,
        'title': task.title,
        'description': task.description,
        'completed': task.completed
    } for task in tasks])

if __name__ == '__main__':
    app.run(debug=True)
```

### 2.2 å‰ç«¯Reactåº”ç”¨

```python
# å‰ç«¯ç»„ä»¶ç¤ºä¾‹ï¼ˆç”¨Pythonç”ŸæˆReactä»£ç ï¼‰
def generate_react_component():
    return '''
import React, { useState, useEffect } from 'react';
import axios from 'axios';

const TaskList = () => {
    const [tasks, setTasks] = useState([]);
    const [newTask, setNewTask] = useState('');

    useEffect(() => {
        fetchTasks();
    }, []);

    const fetchTasks = async () => {
        try {
            const response = await axios.get('/api/tasks');
            setTasks(response.data);
        } catch (error) {
            console.error('Error fetching tasks:', error);
        }
    };

    const addTask = async () => {
        try {
            await axios.post('/api/tasks', { title: newTask });
            setNewTask('');
            fetchTasks();
        } catch (error) {
            console.error('Error adding task:', error);
        }
    };

    return (
        <div className="task-list">
            <h1>Task Manager</h1>
            <div className="add-task">
                <input
                    type="text"
                    value={newTask}
                    onChange={(e) => setNewTask(e.target.value)}
                    placeholder="Enter new task"
                />
                <button onClick={addTask}>Add Task</button>
            </div>
            <div className="tasks">
                {tasks.map(task => (
                    <div key={task.id} className="task-item">
                        <span className={task.completed ? 'completed' : ''}>
                            {task.title}
                        </span>
                    </div>
                ))}
            </div>
        </div>
    );
};

export default TaskList;
'''
```

### 2.3 Dockeré…ç½®

```python
def generate_docker_compose():
    return '''
version: '3.8'

services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - REACT_APP_API_URL=http://localhost:5000
    depends_on:
      - backend

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    ports:
      - "5000:5000"
    environment:
      - DATABASE_URL=postgresql://user:password@db:5432/webapp
      - JWT_SECRET_KEY=your-secret-key
    depends_on:
      - db

  db:
    image: postgres:13
    environment:
      - POSTGRES_DB=webapp
      - POSTGRES_USER=user
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

volumes:
  postgres_data:
'''
```

## 3. éƒ¨ç½²é…ç½®

### 3.1 CI/CDæµæ°´çº¿

```python
def generate_github_actions():
    return '''
name: CI/CD Pipeline

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Set up Python
      uses: actions/setup-python@v2
      with:
        python-version: 3.9
    - name: Install dependencies
      run: |
        pip install -r backend/requirements.txt
    - name: Run tests
      run: |
        cd backend
        python -m pytest

  deploy:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    steps:
    - name: Deploy to production
      run: |
        echo "Deploying to production..."
'''
```

## 4. æ€»ç»“

Webåº”ç”¨å¼€å‘é¡¹ç›®æ¨¡æ¿æä¾›äº†å®Œæ•´çš„å¼€å‘æ¡†æ¶ï¼ŒåŒ…æ‹¬ï¼š

- å‰åç«¯åˆ†ç¦»æ¶æ„
- æ•°æ®åº“é›†æˆ
- Dockerå®¹å™¨åŒ–
- CI/CDè‡ªåŠ¨åŒ–éƒ¨ç½²
- å®Œæ•´çš„å¼€å‘å·¥å…·é“¾

---

**ç›¸å…³æ–‡æ¡£**:

- [ç§»åŠ¨åº”ç”¨å¼€å‘](./07-01-02-ç§»åŠ¨åº”ç”¨å¼€å‘.md)
- [APIè®¾è®¡æœ€ä½³å®è·µ](./07-02-æœ€ä½³å®è·µ/07-02-01-APIè®¾è®¡.md)
